/*!
 * 
 *     SuperMap Leaflet.(https://github.com/SuperMap/supermap-leaflet#readme)
 *     Copyright© 2000-2017 SuperMap Software Co. Ltd
 *     license: Apache-2.0
 *     version: v0.0.1-beta
 * 
 */
!function(e){function t(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,r){"use strict";function a(e,t,r){var a=e*t*(1/.0254)*o(r);return a=1/a}function i(e,t,r){var a=e*t*(1/.0254)*o(r);return a=1/a}function o(e){var t;return"METER"===e?t=1:"DEGREE"===e?t=2*Math.PI*6378137/360:"KILOMETER"===e?t=.001:"INCH"===e?t=1/.025399999918:"FOOT"===e&&(t=.3048),t}Object.defineProperty(t,"__esModule",{value:!0}),t.resolutionToScale=a,t.scaleToResolution=i,t.getMeterPerMapUnit=o;t.SuperMapUtil={resolutionToScale:a,scaleToResolution:i,getMeterPerMapUnit:o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tiledMapLayer=t.TiledMapLayer=void 0;var a=r(4),i=r(0),o=t.TiledMapLayer=a.TileLayer.extend({options:{token:null,layersID:null,redirect:!1,transparent:null,cacheEnabled:null,prjCoordSys:null,overlapDisplayed:!0,overlapDisplayedOptions:null,tileversion:null,attribution:'Powered by <a href="http://www.supermap.com">SuperMap</a> | Map Data <a href="http://support.supermap.com.cn/product/iServer.aspx">SuperMap iServer</a>'},initialize:function(e,t){this.url=this._url=e,a.TileLayer.prototype.initialize.apply(this,arguments),a.Util.setOptions(this,t),a.Util.stamp(this)},onAdd:function(e){this._initLayerUrl(),a.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._getScaleFromCoords(e);return this._layerUrl+"&scale="+t+"&x="+e.x+"&y="+e.y},setScales:function(e){this.scales=e||this.scales},getScale:function(e){var t=this,r=e||t._map.getZoom();return t.scales[r]},_getScaleFromCoords:function(e){var t=this,r=void 0;return t.scales&&t.scales[e.z]?t.scales[e.z]:(t.scales=t.scales||{},r=t._getDefaultScale(e),t.scales[e.z]=r,r)},_getDefaultScale:function(e){var t=this,r=t._map.options.crs,a=void 0;if(r.options&&r.options.resolutions)a=r.options.resolutions[e.z];else{var o=t._tileCoordsToBounds(e),n=r.project(o.getNorthEast()),s=r.project(o.getSouthWest()),l=t.options.tileSize;a=Math.max(Math.abs(n.x-s.x)/l,Math.abs(n.y-s.y)/l)}var p="METER";if(r.code){var u=r.code.split(":");if(u&&u.length>1){var c=parseInt(u[1]);p=c&&c>=4e3&&c<=5e3?"DEGREE":"METER"}}return i.SuperMapUtil.resolutionToScale(a,96,p)},_initLayerUrl:function(){var e=this,t=e.url+"/tileImage.png?";t+=e._initAllRequestParams().join("&"),this._layerUrl=t},_initAllRequestParams:function(){var e=this,t=e.options||{},r=[],a=this.options.tileSize;r.push("width="+a),r.push("height="+a);var i=!0===t.redirect&&t.redirect;r.push("redirect="+i);var o=!0===t.transparent&&t.transparent;r.push("transparent="+o);var n=!1!==t.cacheEnabled||t.cacheEnabled;r.push("cacheEnabled="+n),t.prjCoordSys&&r.push("prjCoordSys="+JSON.stringify(t.prjCoordSys)),t.token&&r.push("token="+t.token),t.layersID&&r.push("layersID="+t.layersID);var s=e._map.options.crs;if(s.projection&&s.projection.bounds){var l=s.projection.bounds,p=L.point(l.min.x,l.max.y);r.push('origin={"x":'+p.x+',"y":'+p.y+"}")}return!1===t.overlapDisplayed?(r.push("overlapDisplayed=false"),t.overlapDisplayedOptions&&r.push("overlapDisplayedOptions="+e.overlapDisplayedOptions.toString())):r.push("overlapDisplayed=true"),!0===t.cacheEnabled&&t.tileversion&&r.push("tileversion="+t.tileversion),r}});t.tiledMapLayer=function(e,t){return new o(e,t)}},function(e,t){e.exports={name:"supermap-leaflet",version:"0.0.1-beta",description:"A Leafle plugins for working with  SuperMap service types. Requires Leaflet v1.0.0 or later.",main:"/dist/SuperMapLeaflet.js",scripts:{release:"webpack && npm run compress",compress:"uglifyjs --comments /Copyright©/i  ./dist/SuperMapLeaflet.debug.js  -c -m -o ./dist/SuperMapLeaflet.js",build:"webpack",test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"https://github.com/SuperMap/supermap-leaflet.git"},homepage:"https://github.com/SuperMap/supermap-leaflet#readme",keywords:["SuperMap","Leaflet","SuperMap-Leaflet","leaflet plugin"],author:"SuperMap",license:"Apache-2.0",dependencies:{leaflet:"1.1.0"},devDependencies:{"babel-core":"^6.24.1","babel-loader":"^7.0.0","babel-preset-es2015":"^6.24.1",webpack:"^2.4.1","json-loader":"^0.5.4","uglify-js":"^3.0.15"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tiledMapLayer=t.TiledMapLayer=t.Util=t.version=void 0;var a=r(0);Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return a.Util}});var i=r(1);Object.defineProperty(t,"TiledMapLayer",{enumerable:!0,get:function(){return i.TiledMapLayer}}),Object.defineProperty(t,"tiledMapLayer",{enumerable:!0,get:function(){return i.tiledMapLayer}});var o=r(2);t.version=o.version,window.L.supermap=t},function(e,t){e.exports=L}]);